{"version":3,"sources":["../../server/simulations/index.js"],"names":["create","setup","simulations","templates","map","template","req","res","next","simulate","undefined","url","match","route","timeout","setTimeout"],"mappings":";;;;;AAIO,MAAMA,0BAAUC,KAAD,IAAkB;AACtC,QAAMC,cAAcD,MAAME,SAAN,CAAgBC,GAAhB,CAAoBC,YAAY,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACtE,UAAM,EAAEC,QAAF,KAAeJ,QAArB;;AAEA,QAAII,aAAaC,SAAjB,EAA4B;AAC1B,aAAOF,MAAP;AACD;;AAED,QAAIF,IAAIK,GAAJ,CAAQC,KAAR,CAAcP,SAASQ,KAAvB,CAAJ,EAAmC;AACjC,UAAIJ,SAASK,OAAT,KAAqBJ,SAAzB,EAAoC;AAClC,eAAOK,WAAW,MAAMP,MAAjB,EAAyBC,SAASK,OAAlC,CAAP;AACD;AACF;;AAED,WAAON,MAAP;AACD,GAdmB,CAApB;;AAgBA,SAAON,WAAP;AACD,CAlBM","file":"index.js","sourcesContent":["/* @flow */\n\nimport type { Setup } from '../types';\n\nexport const create = (setup: Setup) => {\n  const simulations = setup.templates.map(template => (req, res, next) => {\n    const { simulate } = template;\n\n    if (simulate === undefined) {\n      return next();\n    }\n\n    if (req.url.match(template.route)) {\n      if (simulate.timeout !== undefined) {\n        return setTimeout(() => next(), simulate.timeout);\n      }\n    }\n\n    return next();\n  });\n\n  return simulations;\n};\n"]}