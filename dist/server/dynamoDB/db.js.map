{"version":3,"sources":["../../../server/dynamoDB/db.js"],"names":["AWS","config","update","region","aws","db","dynamoDB","documentClient","setup","endpointURL","endpoint","DynamoDB","Endpoint","apiVersion","DocumentClient"],"mappings":";;;;;;;AAEA;;;;AAEA;;;;;;AAEAA,iBAAIC,MAAJ,CAAWC,MAAX,CAAkB,EAAEC,QAAQF,iBAAOG,GAAP,CAAWD,MAArB,EAAlB;;AAEA,MAAME,KAAK,CAAC,MAAM;AAChB,MAAIC,QAAJ;AACA,MAAIC,cAAJ;;AAEA,SAAO;AACLC,UAAM,EAAEC,WAAF,EAAN,EAAuB;AACrBT,uBAAIC,MAAJ,CAAWC,MAAX,CAAkB;AAChBQ,kBAAUD;AADM,OAAlB;;AAIAH,iBAAW,IAAIN,iBAAIW,QAAR,CAAiB;AAC1BD,kBAAU,IAAIV,iBAAIY,QAAR,CAAiBH,WAAjB,CADgB;AAE1BI,oBAAY;AAFc,OAAjB,CAAX;;AAKAN,uBAAiB,IAAIP,iBAAIW,QAAJ,CAAaG,cAAjB,CAAgC,EAAED,YAAY,YAAd,EAAhC,CAAjB;AACD,KAZI;;AAcLP,eAAW;AACT,aAAOA,QAAP;AACD,KAhBI;;AAkBLC,qBAAiB;AACf,aAAOA,cAAP;AACD;AApBI,GAAP;AAsBD,CA1BU,GAAX;;AA8BO,MAAMC,wBAAkB,CAAC,EAAEC,WAAF,EAAD,KAAqB;AAClDJ,KAAGG,KAAH,CAAS,EAAEC,WAAF,EAAT;AACD,CAFM;;AAIA,MAAMH,8BAAW,MAAMD,GAAGC,QAAH,EAAvB;AACA,MAAMC,0CAAiB,MAAMF,GAAGE,cAAH,EAA7B","file":"db.js","sourcesContent":["/* @flow */\n\nimport AWS from 'aws-sdk';\n\nimport config from '../config';\n\nAWS.config.update({ region: config.aws.region });\n\nconst db = (() => {\n  let dynamoDB;\n  let documentClient;\n\n  return {\n    setup({ endpointURL }) {\n      AWS.config.update({\n        endpoint: endpointURL,\n      });\n\n      dynamoDB = new AWS.DynamoDB({\n        endpoint: new AWS.Endpoint(endpointURL),\n        apiVersion: '2012-10-08',\n      });\n\n      documentClient = new AWS.DynamoDB.DocumentClient({ apiVersion: '2012-08-10' });\n    },\n\n    dynamoDB() {\n      return dynamoDB;\n    },\n\n    documentClient() {\n      return documentClient;\n    },\n  };\n})();\n\ntype SetupDef = ({ endpointURL?: string }) => void;\n\nexport const setup: SetupDef = ({ endpointURL }) => {\n  db.setup({ endpointURL });\n};\n\nexport const dynamoDB = () => db.dynamoDB();\nexport const documentClient = () => db.documentClient();\n"]}